-- Tabela USUARIOS
CREATE TABLE USUARIOS (
    ID_USUARIO SERIAL PRIMARY KEY ,
    NOME VARCHAR(255) NOT NULL,
    CPF VARCHAR(11) NOT NULL,
    SENHA VARCHAR(255) NOT NULL
);

-- Tabela CONTATO
CREATE TABLE CONTATO (
    ID_CONTATO SERIAL PRIMARY KEY,
    ID_USUARIO SERIAL NOT NULL,
    EMAIL VARCHAR(255),
    TELEFONE VARCHAR(20),
    ENDERECO VARCHAR(255),
    BAIRRO VARCHAR(255),
    NUMERO_CASA VARCHAR(10),
    CEP VARCHAR(10),
    CIDADE VARCHAR(255),
    UF VARCHAR(2),
    DATA_NASCIMENTO VARCHAR(100),
    FOREIGN KEY (ID_USUARIO) REFERENCES USUARIOS(ID_USUARIO)
);

-- Tabela PRODUTOS
CREATE TABLE PRODUTOS (
    ID_PRODUTO SERIAL PRIMARY KEY,
    NOME VARCHAR(255) NOT NULL,
    REFERENCIA VARCHAR(50) UNIQUE NOT NULL,
    QUANTIDADE INT NOT NULL,
    PRECO DECIMAL(10, 2) NOT NULL,
	CATEGORIA VARCHAR(20)
);

-- Tabela CARRINHO_COMPRA
CREATE TABLE CARRINHO_COMPRA (
    ID_CARRINHO SERIAL PRIMARY KEY,
    ID_USUARIO SERIAL NOT NULL,
    ID_PRODUTO SERIAL NOT NULL,
    QUANTIDADE INT NOT NULL,
    FOREIGN KEY (ID_USUARIO) REFERENCES USUARIOS(ID_USUARIO),
    FOREIGN KEY (ID_PRODUTO) REFERENCES PRODUTOS(ID_PRODUTO)
);

-- Tabela CONFIRMACAO_COMPRA
CREATE TABLE CONFIRMACAO_COMPRA (
    ID_CONFIRMACAO SERIAL PRIMARY KEY,
    ID_USUARIO SERIAL NOT NULL,
    ID_PRODUTO SERIAL NOT NULL,
    QUANTIDADE INT NOT NULL,
    VALOR_TOTAL DECIMAL(10, 2) NOT NULL,
    METODO_PAGAMENTO VARCHAR(50) NOT NULL,
    FOREIGN KEY (ID_USUARIO) REFERENCES USUARIOS(ID_USUARIO),
    FOREIGN KEY (ID_PRODUTO) REFERENCES PRODUTOS(ID_PRODUTO)
);

CREATE TABLE rastreamento (
    id SERIAL PRIMARY KEY,
    id_produtofk INT,
    data_registro TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    localizacao VARCHAR(100),
    status VARCHAR(50),
    FOREIGN KEY (id_produtofk) REFERENCES produtos(id_produto)
);
